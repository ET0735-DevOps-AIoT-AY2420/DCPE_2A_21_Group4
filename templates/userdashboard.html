<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/userdashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/menuBarStyle.css') }}">

    <!-- Font-family (Poppins) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Logo Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <!-- JavaScript Files -->
    <script src="{{ url_for('static', filename='js/menuBar.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/userdashboard.js') }}" defer></script>
</head>
<body>

        <!-- Menu Bar -->
        <div class="menu-bar">
            <div class="menu-items">
                <a href="{{ url_for('homepage') }}" class="menu-item active" id="home" onclick="activeTab(this)">Home</a> 
                <a href="{{ url_for('borrowed_books') }}" class="menu-item" id="borrowedBooks" onclick="activeTab(this)">Borrowed Books</a>
                <a href="{{ url_for('userdashboard') }}" class="menu-item" id="userDashboard" onclick="activeTab(this)">User Dashboard</a>    
                <a href="{{ url_for('signup') }}" class="logout-button">Logout</a>        
            </div>
            <div class="menu-icons">
                <a href="#" class="icon noti"> <i class="fa fa-bell-o" aria-hidden="true"></i></a>
                <a href="#" class="icon favorite"> <i class="fa fa-heart-o" aria-hidden="true"></i></a>
            </div>
        </div> 

    <div class="container">
        <div class="stats">
            <div class="stat-box">
                <h2>BORROWED BOOKS</h2>
                <p>{{reservedCount}}</p>
            </div>
         
            <div class="stat-box">
                <h2>FINES</h2>
                <p>${{ user['payableFines'] }}</p>
            </div>
        </div>

        <div class="catchups">
            <h3>Catch-Ups</h3>
            <div class="catchup-item" onclick="showPopup('Book is Due on 14th Jan', 'This book is due on 14th January. Please make sure to return it to avoid any fines.')">
                <strong>Book is Due on 14th Jan</strong>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
            <div class="catchup-item" onclick="showPopup('Reserve these Books Now', 'These books are now available for reservation. Make sure to reserve them early to secure a copy.')">
                <strong>Reserve these Books Now</strong>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
            <div class="catchup-item" onclick="showPopup('Mindful of SCAMS', 'Be cautious of scams while borrowing or lending books. Always use verified channels for transactions.')">
                <strong>Mindful of SCAMS</strong>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
        </div>

        <div class="user-info">
            <h2>User Info</h2>
            <div class="profile-logo">
                <div class="profile-container">
                    <img id="profile-image" src="{{ url_for('static', filename='images/profile.jpeg') }}" alt="Profile Logo" class="profile-image">
                    <button id="upload-button" class="edit-profile-picture" style="display: none;">
                        <img src="{{ url_for('static', filename='images/pencilicon.png') }}" alt="Edit" class="edit-icon">
                    </button>
                </div>
                <input type="file" id="upload-profile" style="display: none;">
            </div>
            <form id="user-info-form">
                <label for="name"><strong>Name:</strong></label>
                <input type="text" id="name" name="name" value="{{ user['name'] }}" disabled>

                <label for="email"><strong>Email Address:</strong></label>
                <input type="email" id="email" name="email" value="{{ user['email'] }}" disabled>

                <label for="createdAt"><strong>Account Created:</strong></label>
                <input type="text" id="createdAt" name="createdAt" value="{{ user['createdAt'] }}" disabled>

                <button type="button" id="edit-button">Edit</button>
                <button type="submit" id="save-button" style="display: none;">Save</button>
            </form>
        </div>

    </div>

    <!-- Popup Modal -->
    <div id="popup" class="popup" style="display: none;">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">&times;</span>
            <h2 id="popup-title">Popup Title</h2>
            <p id="popup-description">Popup description goes here.</p>
        </div>
    </div>

</body>
</html>
